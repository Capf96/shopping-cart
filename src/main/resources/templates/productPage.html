<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">

<th:block th:include="/_head"></th:block>

<body>

<!-- Include _menu.html -->
<th:block th:include="/_menu"></th:block>

<div class="text-center">
    <h1>
        <span th:text="${product.getName()}"> Name </span>
    </h1>
    <a th:href="${'/users/' + product.getSeller()}"><span th:text="${product.getSeller()}"></span></a>
</div>

<div>
    <div style="width: 40%; float:left">
        <div id="imageCarousel" class="carousel slide" data-ride="carousel">
            <div class="carousel-inner">
                <div th:if="${!images.isEmpty()}">
                    <div class="carousel-item active">
                        <img th:src="${'/' + images.get(0).getPath()}" class="d-block w-100" alt="...">
                    </div>
                    <div class="carousel-item" th:each="image: ${images.subList(1, images.size())}">
                        <img th:src="${'/' + image.getPath()}" class="d-block w-100" alt="...">
                    </div>
                </div>
                <div th:if="${images.isEmpty()}">
                    <img width="400" height="auto" th:src="${'/images/NoImage.png'}">
                </div>
            </div>
            <a class="carousel-control-prev" href="#imageCarousel" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#imageCarousel" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
        </div>
    </div>

    <div style="width: 20%; float:right; padding-left: 20px">
        <div th:if="${!isOwner}" sec:authorize="hasRole('ROLE_BUYER')">
            <form th:action="@{/cart/addProduct}" method="POST">
                <input type="text" th:value="${product.getProductId()}" name="id" hidden="hidden">
                Quantity: <input type="number" value="1" min="1" name="quantity" />
                <input type="submit" value="Add to Cart" class="btn-primary">
            </form>
        </div>
        <a th:href="@{${'/stores/' + product.getSeller() + '/' + product.getProductId() + '/addImage'}}">
            <button class="btn-primary" th:if="${isOwner}">Add Image</button>
        </a>
        <a th:href="@{${'/stores/' + product.getSeller() + '/' + product.getProductId() + '/deleteImage'}}">
            <button class="btn-warning" th:if="${isOwner}">Delete Images</button>
        </a>
        <form th:if="${isOwner}" th:action="@{${'/stores/' + product.getSeller() + '/' + product.getProductId() + '/delete'}}" method='POST'>
            <input name="submit" type="submit" value="Delete" class="btn-danger" />
        </form>
        <a th:href="@{${'/stores/' + product.getSeller() + '/' + product.getProductId() + '/modify'}}">
            <button class="btn-info" th:if="${isOwner}">Update Product</button>
        </a>
    </div>

    <div style="width: 40%; float:right; padding-left: 20px">
        <p>
            <span th:text="${product.getDescription()}"> Name </span>
        </p>

        <h3>
            Price: <span th:text="${product.getPrice().toString()}"></span>
        </h3>
        <p>
            <span th:if="${product.getQuantity() > 0}" >In Stock</span>
            <span th:if="${product.getQuantity() <= 0}" >Out of Stock</span>
        </p>
    </div>
</div>

</body>
</html>